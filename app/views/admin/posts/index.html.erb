<h1>Admin Posts</h1>

<%= form_tag admin_posts_path, method: :get do %>
  <%= text_field_tag :search, params[:search], placeholder: 'Search posts...' %>
  <%= submit_tag 'Search' %>
<% end %>

<ul>
  <% if @posts.present? %>
    <% @posts.each do |post| %>
      <li>
        <strong>Title:</strong> <%= link_to post.title, admin_post_path(post) %><br>
        <strong>Content:</strong> <%= post.content %><br>
        <strong>Author:</strong> <%= link_to post.user.name, admin_user_path(post.user) %><br>
        <strong>Created At:</strong> <%= post.created_at %><br>

        <!-- Display the image with smaller dimensions -->
        <% if post.image.attached? %>
          <%= image_tag post.image, style: 'max-width: 100px; max-height: 100px;' %><br>
        <% end %>

        <%= link_to "消去", admin_post_path(post), method: :delete, data: { confirm: 'Are you sure you want to delete this post?' } %>
      </li>
    <% end %>
  <% else %>
    <li>No posts available</li>
  <% end %>
</ul>

<%= will_paginate @posts %>
